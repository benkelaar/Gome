<!-- ================================================================================= -->
<!-- This build file automatically generated by EclipseME                              -->
<!-- Version 1.6.5 on Sat Feb 24 10:50:09 SAST 2007.                                    -->
<!--                                                                                   -->
<!-- Modifications may be made to this file and to the user-build.properties files.    -->
<!-- Do not alter eclipseme-build.xml or eclipseme-build.properties.                   -->
<!-- ================================================================================= -->
<project name="gome" default="all" basedir=".">
	<taskdef resource="net/sf/antcontrib/antlib.xml" />

	<!-- User build properties come first so that they can override -->
	<!-- the generated properties file.  Be careful with these      -->
	<!-- overrides.                                                 -->
	<property file="user-build.properties" />

	<!-- Import the low-level targets -->
	<import file="eclipseme-custom.xml" />

	<!-- The primary target of the build file.  The end result is   -->
	<!-- the deployed jar and jad files.                            -->
	<target name="deployedSuite" depends="deployable" />

	<fileset id="base" dir="${project.root.gome}/sources">
		<include name="com/indigonauts/gome/i18n/main_en_US.properties" />
		<include name="com/indigonauts/gome/i18n/help/*.*" />
		<include name="index.txt" />
		<include name="gome.png" />
	</fileset>

	<patternset id="gomoku">
		<include name="gomoku.png" />
	</patternset>

	<patternset id="file-icons">
		<include name="dir.png" />
		<include name="file.png" />
		<include name="rdir.png" />
		<include name="rfile.png" />
		<include name="text.png" />
	</patternset>

	<patternset id="menu-icons">
		<include name="gdark.png" />
		<include name="glight.png" />
		<include name="gmedium.png" />
		<include name="en.png" />
		<include name="fr.png" />
		<include name="jp.png" />
	</patternset>

	<patternset id="i18n">
		<include name="com/indigonauts/gome/i18n/main_fr_FR.properties" />
		<include name="com/indigonauts/gome/i18n/main_jp_JP.properties" />
	</patternset>

	<patternset id="games">
		<include name="games/*.*" />
	</patternset>

	<patternset id="problems">
		<include name="problems/*.*" />
	</patternset>

	<patternset id="joseki">
		<include name="joseki/**/*.*" />
	</patternset>

	<target name="MIDP2">
		<!--var name="wtk.midpapi" value="/opt/wtk2.2/lib/midpapi20.jar:/opt/wtk2.2/lib/cldcapi11.jar:/opt/wtk2.2/lib/wma20.jar:/opt/wtk2.2/lib/mmapi.jar:/opt/wtk2.2/lib/j2me-ws.jar:/opt/wtk2.2/lib/jsr75.jar:/opt/wtk2.2/lib/jsr082.jar:/opt/wtk2.2/lib/jsr184.jar" /-->
		<var name="wtk.midpapi" value="/opt/wtk251/lib/midpapi20.jar:/opt/wtk251/lib/cldcapi11.jar:/opt/wtk251/lib/wma20.jar:/opt/wtk251/lib/mmapi.jar:/opt/wtk251/lib/j2me-ws.jar:/opt/wtk251/lib/jsr75.jar:/opt/wtk251/lib/jsr082.jar:/opt/wtk251/lib/jsr184.jar" />
		<var name="wtk.cldc.version" value="1.1" />
		<var name="wtk.midp.version" value="2.0" />
	</target>

	<target name="MIDP1">
		<var name="wtk.midpapi" value="/opt/wtk104/lib/midpapi.zip" />
		<var name="wtk.cldc.version" value="1.0" />
		<var name="wtk.midp.version" value="1.0" />
	</target>

	<!-- target name="all" depends="cleandist,VMIDP2, VMIDP2_JSR75" /-->
	<target name="all" depends="cleandist,Vminimal,Vminimal-bundle,Vonline,Vi18n,Vnormal,Vjoseki,VMIDP2, VMIDP2_JSR75" />

	<fileset id="gome-minimal-files" dir="${project.root.gome}/sources">
		<exclude name="**/*.*" />
	</fileset>

	<target name="Vminimal" depends="MIDP1" description="Minimal">
		<echo message="Minimal" />
		<var name="midlet.name" value="gome-minimal" />
		<var name="symbols" value="" />
		<copy file="${project.root.gome}/gome.jad" tofile="${project.root.gome}/${midlet.name}.jad" />
		<antcall target="deployable" />
	</target>

	<fileset id="gome-minimal-bundle-files" dir="${project.root.gome}/sources">
		<patternset refid="games" />
		<patternset refid="problems" />
	</fileset>

	<target name="Vminimal-bundle" depends="MIDP1" description="Minimal bundle">
		<echo message="Minimal-bundle" />
		<var name="midlet.name" value="gome-minimal-bundle" />
		<var name="symbols" value="" />
		<copy file="${project.root.gome}/gome.jad" tofile="${project.root.gome}/${midlet.name}.jad" />
		<antcall target="deployable" />
	</target>

	<fileset id="gome-online-files" dir="${project.root.gome}/sources">
		<patternset refid="games" />
		<patternset refid="problems" />
	</fileset>

	<target name="Vonline" depends="MIDP1" description="Online version">
		<echo message="Online" />
		<var name="midlet.name" value="gome-online" />
		<var name="symbols" value="IGS" />
		<copy file="${project.root.gome}/gome.jad" tofile="${project.root.gome}/${midlet.name}.jad" />
		<antcall target="deployable" />
	</target>

	<fileset id="gome-i18n-files" dir="${project.root.gome}/sources">
		<patternset refid="i18n" />
		<patternset refid="games" />
		<patternset refid="problems" />
	</fileset>

	<target name="Vi18n" depends="MIDP1" description="I18N version">
		<echo message="I18n" />
		<var name="midlet.name" value="gome-i18n" />
		<var name="symbols" value="IGS,I18N" />
		<copy file="${project.root.gome}/gome.jad" tofile="${project.root.gome}/${midlet.name}.jad" />
		<antcall target="deployable" />
	</target>

	<fileset id="gome-normal-files" dir="${project.root.gome}/sources">
		<patternset refid="file-icons" />
		<patternset refid="menu-icons" />
		<patternset refid="gomoku" />
		<patternset refid="i18n" />
		<patternset refid="games" />
		<patternset refid="problems" />
	</fileset>

	<target name="Vnormal" depends="MIDP1" description="Normal version">
		<echo message="Normal" />
		<var name="midlet.name" value="gome-normal" />
		<var name="symbols" value="IGS,I18N,SPLASH,MENU_IMAGES" />
		<copy file="${project.root.gome}/gome.jad" tofile="${project.root.gome}/${midlet.name}.jad" />
		<antcall target="deployable" />
	</target>

	<fileset id="gome-MIDP2-files" dir="${project.root.gome}/sources">
		<patternset refid="file-icons" />
		<patternset refid="menu-icons" />
		<patternset refid="gomoku" />
		<patternset refid="i18n" />
		<patternset refid="games" />
		<patternset refid="problems" />
	</fileset>

	<fileset id="gome-MIDP2-JSR75-files" dir="${project.root.gome}/sources">
		<patternset refid="file-icons" />
		<patternset refid="menu-icons" />
		<patternset refid="gomoku" />
		<patternset refid="i18n" />
		<patternset refid="games" />
		<patternset refid="problems" />
	</fileset>

	<target name="VMIDP2" depends="MIDP2" description="MIDP2 version">
		<echo message="MIDP2" />
		<var name="midlet.name" value="gome-MIDP2" />
		<var name="symbols" value="IGS,I18N,SPLASH,MENU_IMAGES,MIDP2" />
		<copy file="${project.root.gome}/gome-MIDP2.jad" tofile="${project.root.gome}/${midlet.name}.jad" />
		<antcall target="deployable" />
	</target>

	<target name="VMIDP2_JSR75" depends="MIDP2" description="MIDP2 version with JSR75">
		<echo message="MIDP2 JSR75" />
		<var name="midlet.name" value="gome-MIDP2-JSR75" />
		<var name="symbols" value="IGS,I18N,SPLASH,MENU_IMAGES,MIDP2,JSR75" />
		<copy file="${project.root.gome}/gome-MIDP2.jad" tofile="${project.root.gome}/${midlet.name}.jad" />
		<antcall target="deployable" />
	</target>

	<target name="Vjoseki" depends="MIDP1" description="Joseki version">
		<var name="midlet.name" value="gome-joseki" />
		<var name="symbols" value="IGS,I18N,SPLASH,MENU_IMAGES" />
		<copy file="${project.root.gome}/gome.jad" tofile="${project.root.gome}/${midlet.name}.jad" />

		<fileset id="gome-joseki-files" dir="${project.root.gome}/sources">
			<patternset refid="file-icons" />
			<patternset refid="menu-icons" />
			<patternset refid="gomoku" />
			<patternset refid="i18n" />
			<patternset refid="games" />
			<patternset refid="problems" />
			<patternset refid="joseki" />
		</fileset>

		<antcall target="deployable" />
	</target>


	<!-- Initialize the build environment as necessary -->
	<target name="-initialize">
		<echo message="Initializing build environment..." />

		<!-- Create the build directories -->
		<mkdir dir="${path.build}" />
		<mkdir dir="${path.build.classes}" />
		<mkdir dir="${path.build.classes}/_no_export" />
		<mkdir dir="${path.build.output}" />
	</target>

	<target name="preprocess" depends="clean, -eclipseme-initialize, -initialize">
		<wtkpreprocess srcdir="${project.root.gome}/sources" destdir="${project.root.gome}/src" symbols="${symbols}" />
		<copy todir="${project.root.gome}/src">
			<fileset refid="base" />
			<fileset refid="${midlet.name}-files" />
		</copy>
	</target>

	<!-- Build the classes that make up the midlet -->
	<target name="build" depends="-initialize, preprocess, -eclipseme-build" description="Builds the classes that make up the project">
	</target>

	<!-- Package up the compiled code without obfuscation -->
	<target name="jar" depends="build,-eclipseme-jar" description="Packages the midlet jar without obfuscation">
	</target>

	<!-- Package up the compiled code with obfuscation -->
	<target name="deployable" depends="build,-eclipseme-deployable" description="Packages the midlet jar, with obfuscation">
		<move file="${project.root.gome}/deployed/${midlet.name}.jad" tofile="${project.root.gome}/dist/${midlet.name}-${gome.version}.jad" />
		<move file="${project.root.gome}/deployed/${midlet.name}.jar" tofile="${project.root.gome}/dist/${midlet.name}-${gome.version}.jar" />
	</target>

	<!-- Run the packaged code -->
	<target name="run" depends="deployable,-eclipseme-run" description="Runs the deployed package in the emulator">
	</target>

	<!-- Build a Palm PRC file -->
	<target name="makeprc" depends="deployable,-eclipseme-makeprc" description="Generates a deployable Palm PRC file">
	</target>

	<target name="cleandist" depends="-eclipseme-initialize">
		<delete dir="${project.root.gome}/dist" />
		<mkdir dir="${project.root.gome}/dist" />
	</target>

	<!-- Clean the output of a previous execution -->
	<target name="clean" depends="-eclipseme-initialize">
		<delete dir="${project.root.gome}/src" />
		<delete dir="${path.build.classes}" />
		<!--delete dir="${project.root.gome}/deployed" /-->
		<mkdir dir="${project.root.gome}/src" />
		<mkdir dir="${path.build.classes}" />
		<!--mkdir dir="${project.root.gome}/deployed" /-->
	</target>
</project>